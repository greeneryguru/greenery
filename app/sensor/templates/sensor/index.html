{% extends "base.html" %}

{% block headers %}
    <script>
    $(document).ready(function() {
        $("button").click(function(){
            var [mode, pk] = this.id.split('-',2);
            if (mode == 'edit') {
                location.href = "/sensor/" + pk + "/edit";
            } else {
                if (window.confirm("Are you sure you want to delete this object from the system?")) {
                    $.post("/sensor/" + pk + "/delete",
                        {'csrfmiddlewaretoken': '{{ csrf_token() }}'}, 
                        function(){location.reload();}
                    );
                }
            }
			return false;
        });
    });
    </script>
{% endblock %}

{% block content %}
{% if title %}
    <h2>{{ title }}</h2>
{% endif %}
{% if payload %}
    <table>
    {% for o in payload %}
        <tr>
        <td>{{ o.name }}</td>
        <td>
        <button id="edit-{{ o.id }}">edit</button>
        </td>
        <td>
        <button id="delete-{{ o.id }}">delete</button>
        </td>
        </tr>
    {% endfor %}
    </table>
{% else %}
    No data available
{% endif %}
<hr>
<a href="/sensor/create">Add New Sensor</a>
{% endblock %}
