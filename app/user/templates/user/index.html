{% extends "base.html" %}
{% block headers %}
    <script>
    $(document).ready(function() {
        $(".delete").click(function(){
            var [mode, pk] = this.id.split('-',2);
            if (window.confirm("Are you sure you want to delete this?")) {          
                $.post("/user/" + pk + "/delete",
                    {'csrfmiddlewaretoken': '{{ csrf_token() }}'},
                    function(){
                        window.location.replace("/user");
                    }
                );
            }
			return false;
        });
    });
    </script>
{% endblock headers %}
{% block content %}
{% if payload %}
    <table class="pure-table pure-table-horizontal" style="width: 100%; max-width: 800px;">
    <thead>
    <tr><td>account</td><td>active</td><td>actions</td></tr>
    </thead>
    <tbody>
    {% for u in payload %}
        <tr>
        <td>{{ u.username }}</td>
        <td>
        {% if u.active %}
        <i class="fa fa-check"></i>
        {% else %}
        <i class="fa fa-ban"></i>
        {% endif %}
        </td>
        <td>
            <a href="/user/{{ u.id }}/edit"><i class="fa fa-edit"></i> edit</a> 
            | <a href="#"><i class="fa fa-lock"></i> password</a>
            | <a href="#" class="delete" id="delete-{{ u.id }}"><i class="fa fa-trash"></i> delete</a>
        </td>
    {% endfor %}
    </tbody>
    </table>
{% else %}
    No data available
{% endif %}
    <p><a href="/user/create"><i class="fa fa-plus"></i> add user</a></p>
{% endblock %}
